\documentclass[../../main.tex]{subfiles}

\begin{document}
\subsection{Theorem 4.32}
\begin{wts}
    Urysohn's Lemma, Locally Compact Version. For any LCH space $X$, and if $K\subseteq U\subseteq X$ where $K$ is compact and $U$ is open, then there exists some $f\in C(X,[0,1])$ with \begin{itemize}
        \item $f=1$ on $K$
        \item $f=0$ outside some compact $\cl{V}\subseteq U$
    \end{itemize}
\end{wts}
\newcommand{\restrictV}{|_{\cl{V}}}
\begin{proof}
    Let $V$ be as in Theorem 4.31, for our fixed $K\subseteq U\subseteq X$, there exists a pre-compact, open $V$ that satisfies
    \[
    K\subseteq V\subseteq \cl{V}\subseteq X
    \]
    It follows that this $(\cl{V},\Tau_{\cl{V}})$ is a normal space by Theorem 4.25 (compact Hausdorff spaces are normal), and by Urysohn's Lemma (Theorem 4.15) on normal spaces, since we can easily find two disjoint closed subsets of $\cl{V}$ in the form of \begin{itemize}
        \item $K\subseteq V^o = V\subseteq \cl{V}$ (compact sets in Hausdorff spaces are closed)
        \item $\partial V=\cl{V}\cap\cl{V^c}$ (closed sets in compact spaces are compact)
        \item $K\subseteq V^o$ implies that $K\cap\partial V =K\cap(\cl{V}\setminus V^o)= \varnothing$
    \end{itemize}
    Then there exists a continuous $f\restrictV\in C(\cl{V},[0,1])$ that evaluates to
    \begin{itemize}
        \item $f\restrictV = 1$ on closed $K$
        \item $f\restrictV = 0$ on closed $\partial V$
    \end{itemize}
    Now let us extend $f\restrictV$ to $f$ by defining 
    \[
    f|_{(\cl{V})^c} = 0
    \]
    We will show that this extension of $f$ is indeed continuous. Indeed, for every closed set $E\subseteq [0,1]$ that does not contain $0$, we have:
    \[
    0\notin E\implies \{0\}\cap E=\varnothing\implies f^{-1}(\{0\})\cap f^{-1}(E)=\varnothing
    \]
    But $(\cl{V})^c\subseteq f^{-1}(\{0\})$ therefore
    \[
    (\cl{V})^c\cap f^{-1}(\{0\})\cap f^{-1}(E)=(\cl{V})^c\cap f^{-1}(E)=\varnothing\implies f^{-1}(E)\subseteq \cl{V}
    \]
    We can write
    \[
    f^{-1}(E)=f\restrictV^{-1}(E)
    \]
    But we know that $f\restrictV$ is continuous, so $f\restrictV^{-1}(E)$ must be closed (with respect to $\cl{V}$), and therefore is closed wrt $X$, since $\cl{V}$ is closed wrt X.\\
    
    For the case where $0\in E$, note that 
    \[
    f^{-1}(E) = \left(f^{-1}(E)\cap \cl{V}\right)\cup\left(f^{-1}(E)\cap(\cl{V})^c\right)=\left(f\restrictV\right)^{-1}(E)\cup \left(f|_{\cl{V}^c}\right)^{-1}(E)
    \]
    The above equalities are messy in print. They are but a simple consequence of disjoint decomposition of the pre-images, since
    \[
    \cl{V}\cap f^{-1}(E) = \{x\in \cl{V}:f(x)\in E\} = f\restrictV^{-1}(E)
    \]
    Back to our main discussion, recall that for every $x\in\partial V$
    \[
    f(x)=0\in f^{-1}(\{0\})\subseteq f^{-1}\restrictV(E)
    \]
    Therefore $\partial V\subseteq f^{-1}\restrictV(E)$, and $(\cl{V})^c = f^{-1}|_{(\cl{V})^c}(E)$ gives us (since $V^c$ is closed),
    \begin{align*}
        f^{-1}(E) &=f^{-1}\restrictV(E)\cup \partial V\cup (\cl{V})^c \\[1ex]
        &= f^{-1}\restrictV(E)\cup \cl{(V^c)}\cup (\cl{V})^c \\[1ex]
        &= f^{-1}\restrictV(E)\cup \left(V^c\cup V^{co}\right) \\[1ex]
        &= f^{-1}\restrictV(E)\cup V^c \\[1ex]
    \end{align*}
    Since $f^{-1}\restrictV(E)$ and $V^c$ are closed subsets of $X$, then $f^{-1}(E)$ is also closed, and $f\in C(X,[0,1])$.
\end{proof}

\end{document}